<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Confession</title>
    <!-- Load Tailwind CSS for modern, utility-first styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load a beautiful, elegant font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap" rel="stylesheet">
    <!-- Load Three.js for beautiful 3D elements -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="gold" d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5A5.4 5.4 0 0 1 7.5 3c1.74 0 3.48.81 4.5 2.09C13.02 3.81 14.76 3 16.5 3 22 3 22 8.5 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>'), auto;
        }
        .elegant-font {
            font-family: 'Playfair Display', serif;
        }
        canvas {
            position: absolute;
            top: 0;
            left: 0;
            display: block;
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body class="bg-slate-950 text-slate-100 flex items-center justify-center min-h-screen p-4 overflow-hidden">

    <!-- 3D Canvas for an interactive background -->
    <canvas id="three-canvas"></canvas>

    <!-- Main UI Container -->
    <div class="z-10 relative flex flex-col items-center justify-center min-h-screen w-full">
        <div id="card-container" class="bg-slate-900 border border-slate-700 rounded-3xl p-8 md:p-12 shadow-2xl text-center max-w-lg w-full transform transition-all duration-1000 opacity-0 scale-95">
            
            <!-- Stage 1: The Initial Prompt -->
            <div id="stage-1" class="transition-all duration-1000 ease-in-out">
                <p id="click-prompt" class="text-sm md:text-base text-slate-400">
                    There's something I've been wanting to share with you...
                </p>
                <button id="click-button" class="mt-6 px-8 py-3 bg-slate-800 text-pink-300 font-bold border border-slate-700 rounded-full hover:bg-slate-700 transition-colors duration-300 transform hover:scale-105 active:scale-95 shadow-md">
                    Open My Heart
                </button>
            </div>

            <!-- Stage 2: The Confession and Question -->
            <div id="stage-2" class="hidden opacity-0 transition-opacity duration-1000 ease-in-out">
                <h1 id="confession-text" class="elegant-font text-3xl md:text-5xl font-light tracking-wide animate-pulse">
                    I like you a lot. ‚ù§Ô∏è
                </h1>
                
                <p id="final-question" class="mt-4 text-sm md:text-base text-slate-400">
                    Would you be open to going out sometime?
                </p>

                <!-- Confession Buttons -->
                <div class="mt-8 flex justify-center gap-4">
                    <button id="yes-button" class="px-8 py-3 bg-pink-600 text-white font-bold rounded-full hover:bg-pink-500 transition-colors duration-300 transform hover:scale-105 active:scale-95 shadow-lg">
                        YES! ‚ú®
                    </button>
                    <button id="no-button" class="px-8 py-3 bg-slate-800 text-slate-400 border border-slate-700 rounded-full hover:bg-slate-700 transition-colors duration-300 transform hover:scale-105 active:scale-95 shadow-md">
                        I need to think... üíî
                    </button>
                </div>
            </div>

            <!-- Stage 3: The Response Messages -->
            <div id="response-message" class="hidden opacity-0 transition-opacity duration-1000 ease-in-out">
                <!-- Message will be dynamically inserted here -->
            </div>
            
            <!-- Funny messages for "no" button click -->
            <div id="no-response-messages" class="mt-4 hidden opacity-0 transition-opacity duration-1000 ease-in-out">
                <!-- Message will be dynamically inserted here -->
            </div>
        </div>
    </div>

    <script>
        window.onload = function() {
            // --- UI Elements & State ---
            const card = document.getElementById('card-container');
            const stage1 = document.getElementById('stage-1');
            const stage2 = document.getElementById('stage-2');
            const clickButton = document.getElementById('click-button');
            const yesButton = document.getElementById('yes-button');
            const noButton = document.getElementById('no-button');
            const responseMessage = document.getElementById('response-message');
            const noResponseMessage = document.getElementById('no-response-messages');
            
            let clickCount = 0;
            const clicksNeeded = 5;

            // --- Three.js 3D Setup ---
            const canvas = document.getElementById('three-canvas');
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer({ canvas: canvas, alpha: true, antialias: true });

            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            renderer.setClearColor(0x000000, 0);

            // Create heart particle system
            const heartGeometry = new THREE.IcosahedronGeometry(0.5, 0);
            const particleCount = 200;
            const heartParticles = new THREE.Group();
            for (let i = 0; i < particleCount; i++) {
                const heartMaterial = new THREE.MeshPhongMaterial({
                    color: new THREE.Color(0xFF69B4).lerp(new THREE.Color(0xFF1493), Math.random()), // Shades of pink
                    shininess: 50
                });
                const heart = new THREE.Mesh(heartGeometry, heartMaterial);
                heart.position.x = (Math.random() - 0.5) * 100;
                heart.position.y = (Math.random() - 0.5) * 100;
                heart.position.z = (Math.random() - 0.5) * 100;
                heart.rotation.x = Math.random() * Math.PI;
                heart.rotation.y = Math.random() * Math.PI;
                heartParticles.add(heart);
            }
            scene.add(heartParticles);

            // Main object that gets revealed
            const mainHeartGeometry = new THREE.TorusKnotGeometry(10, 3, 100, 16);
            const mainHeartMaterial = new THREE.MeshPhongMaterial({
                color: 0x8A2BE2, // A beautiful purple
                shininess: 100,
                specular: 0xAAAAAA,
                transparent: true,
                opacity: 0
            });
            const mainHeart = new THREE.Mesh(mainHeartGeometry, mainHeartMaterial);
            scene.add(mainHeart);

            // Add lighting
            const ambientLight = new THREE.AmbientLight(0x404040, 5);
            scene.add(ambientLight);
            const pointLight = new THREE.PointLight(0xFFFFFF, 10, 100);
            pointLight.position.set(20, 20, 20);
            scene.add(pointLight);

            camera.position.z = 40;

            // --- Animation & Interactivity ---
            let mouseX = 0, mouseY = 0;
            const windowHalfX = window.innerWidth / 2;
            const windowHalfY = window.innerHeight / 2;
            let revealProgress = 0;

            document.addEventListener('mousemove', (event) => {
                mouseX = (event.clientX - windowHalfX);
                mouseY = (event.clientY - windowHalfY);
            });

            // Main animation loop
            const animate = () => {
                requestAnimationFrame(animate);

                // Animate background particles
                heartParticles.rotation.x += 0.001;
                heartParticles.rotation.y += 0.002;
                heartParticles.children.forEach(heart => {
                    heart.position.x += (Math.random() - 0.5) * 0.1;
                    heart.position.y += (Math.random() - 0.5) * 0.1;
                    heart.position.z += (Math.random() - 0.5) * 0.1;
                    heart.rotation.x += 0.01;
                    heart.rotation.y += 0.01;
                });

                // Update main heart opacity based on click progress
                mainHeart.material.opacity = revealProgress;
                mainHeart.rotation.y += 0.05 * ((mouseX * 0.001) - mainHeart.rotation.y);
                mainHeart.rotation.x += 0.05 * ((mouseY * 0.001) - mainHeart.rotation.x);

                renderer.render(scene, camera);
            };

            // Animate on window load
            animate();

            // Initial UI fade-in
            setTimeout(() => {
                card.classList.remove('opacity-0', 'scale-95');
                card.classList.add('opacity-100', 'scale-100');
            }, 300);

            // Click button event listener
            clickButton.addEventListener('click', () => {
                if (clickCount < clicksNeeded) {
                    clickCount++;
                    const progress = clickCount / clicksNeeded;
                    revealProgress = progress; // Update 3D object opacity
                    clickButton.textContent = `Keep Going... (${clicksNeeded - clickCount} left)`;

                    if (clickCount === clicksNeeded) {
                        // All clicks done, start the reveal
                        clickButton.disabled = true;
                        setTimeout(revealStage2, 1000);
                    }
                }
            });

            // Reveal the main confession stage
            function revealStage2() {
                stage1.classList.add('hidden');
                stage2.classList.remove('hidden');
                setTimeout(() => {
                    stage2.classList.remove('opacity-0');
                }, 50);
            }

            // Yes button click handler
            yesButton.addEventListener('click', () => {
                const message = `That's wonderful! I can't wait to see you again. ‚ú®`;
                displayResponseMessage(message, 'text-pink-300');
            });

            // No button click handler
            noButton.addEventListener('click', () => {
                // Show funny message
                noResponseMessage.innerHTML = `<p class="elegant-font text-xl md:text-2xl font-light text-slate-400">That's not an option. üòâ</p>`;
                noResponseMessage.classList.remove('hidden');
                setTimeout(() => {
                    noResponseMessage.classList.remove('opacity-0');
                }, 50);

                // Hide the no button
                noButton.classList.add('hidden');
            });

            // Function to handle displaying final message
            function displayResponseMessage(message, colorClass) {
                stage2.classList.add('hidden');
                noResponseMessage.classList.add('hidden');
                responseMessage.innerHTML = `<p class="elegant-font text-2xl md:text-3xl font-light ${colorClass}">${message}</p>`;
                responseMessage.classList.remove('hidden');
                setTimeout(() => {
                    responseMessage.classList.remove('opacity-0');
                }, 50);
            }
        };
    </script>
</body>
</html>
